{% extends "User_App/base.html" %}
{% load static %}

{% block content %}
<style>
    .cart-container{max-width:900px;margin:auto;padding:20px;}
    .cart-title{text-align:center;font-size:28px;font-weight:bold;margin-bottom:20px;}
    .cart-table{width:100%;border-collapse:collapse;}
    .cart-table th,.cart-table td{padding:12px;border-bottom:1px solid #ddd;text-align:center;}
    .cart-table th{background:#f19696;}
    .qty-input{width:60px;padding:6px;text-align:center;border:1px solid #ccc;border-radius:5px;}
    .btn{padding:7px 12px;border-radius:6px;text-decoration:none;font-size:14px;}
    .btn-update{background:#007bff;color:white;}
    .btn-remove{background:#e63946;color:white;}
    .checkout-box{text-align:right;margin-top:20px;}
    .total-text{font-size:20px;font-weight:bold;}
    .btn-checkout{background:#16a34a;color:white;padding:10px 18px;border-radius:8px;text-decoration:none;}
</style>

<div class="cart-container">

    <div class="cart-title">Your Shopping Cart</div>

    {% if items %}
    <table class="cart-table">
        <tr>
            <th>Product</th>
            <th>Price</th>
            <th width="140">Quantity</th>
            <th>Total</th>
            <th>Action</th>
        </tr>

        {% for item in items %}
        <tr>
            <td>{{ item.product.name }}</td>
            <td>₹ {{ item.product.price }}</td>

            <td>
                <form action="{% url 'User_App:update_cart' item.id %}" method="POST" style="display:flex;gap:8px;justify-content:center;">
                    {% csrf_token %}
                    <input type="number" name="quantity" class="qty-input" value="{{ item.quantity }}" min="1">
                    <button type="submit" class="btn btn-update">Update</button>
                </form>
            </td>

            <td>₹ {{ item.subtotal }}</td>

            <td>
                <a href="{% url 'User_App:remove_cart_item' item.id %}" class="btn btn-remove">Remove</a>
            </td>
        </tr>
        {% endfor %}
    </table>

    <div class="checkout-box">
        <div class="total-text">Total: ₹ {{ total }}</div>
        <br>
        <a href="{% url 'User_App:checkout' %}" class="btn-checkout">Proceed to Checkout</a>
    </div>

    {% else %}
    <h3 style="text-align:center;color:#666;">Your cart is empty</h3>
    {% endif %}
</div>

{% endblock %}
